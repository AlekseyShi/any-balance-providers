function Cloudflare(f){function k(b,c,a){function g(b,a){if(!/^https?:/i.test(a)){var d=f;/^\//.test(a)&&(d=n(b));a=(d+"/"+a).replace(/([^:])\/{2,}/g,"$1/")}return a}var e=a||[],h;a={set src(a){/img/i.test(b)?q.push(n()+a):d.trace("Can not set src of "+b+" to "+a)},set innerHTML(a){var c=/^<(\w+)\s*([^>]*)>([^<]*)<\/\1>$/.exec(a);if(!c)throw new d.Error("Creation of too complex innerHTML is not implemented: "+a);a=sumParam(c[2],null,null,/(\w+\s*=\s*(["'])[^'"]*\2)/g);for(var c={},g=0;g<a.length;++g){var f=
/(\w+)\s*=\s*["']([^'"])/.exec(a[g]);c[f[1]]=html_entity_decode(f[2])}e.push(new k(b,c))},get firstChild(){return e[0]},set href(a){h=g(f,a)},get href(){return h},submit:function(){for(var a=[],b=0;b<e.length;++b)a.push([e[b].name,e[b].value]);/get/i.test(this.method||"get")?(a=a.reduce(function(a,b){return(a?a+"&":"?")+encodeURIComponent(b[0])+"="+encodeURIComponent(b[1])},""),l._lastHtml=d.requestGet(g(f,this.action)+a,p)):l._lastHtml=d.requestPost(g(f,this.action),a,p)}};for(var m in c)a[m]=c[m];
return a}function h(){return getParam(f,/^https?:\/\/([^\/]*)/i)}function n(b){return getParam(b||f,/^(https?:\/\/[^\/]*)/i)}var d=AnyBalance,p=addHeaders(g_headers,{Referer:f}),q=[],m={},e={location:function(){return{href:f,reload:function(){if(e.onunload)e.onunload()}}}(),document:l},l={get cookie(){var b=d.getCookies(),c=h();return b.reduce(function(a,b){endsWith(b.domain,c)&&(a&&(a+=";"),a+=b.name+"="+b.value);return a},"")},set cookie(b){var c=getParam(b,null,null,/\bpath=([^;]*)/i);b=getParam(b,
null,null,/^[^;]*/).match(/([^=]*)=(.*)/);d.setCookie(h(),b[1],b[2],{path:c})},createElement:function(b){return k(b)},getElementById:function(b){return m[b]},window:e};e.parent=e;9<=d.getLevel()&&(d.setCookie(h(),"__cfduid",d.getData("__cfduid")),d.setCookie(h(),"cf_clearance",d.getData("cf_clearance")));return{document:l,window:e,isCloudflared:function(b){return/<input[^>]+name="jschl_vc"[^>]*value="([^"]*)/i.test(b)||/<form[^>]+chk_captcha/i.test(b)},executeScript:function(b){if(/<form[^>]+chk_captcha/i.test(b)){var c=
b;AnyBalance.trace("Cloudflare потребовало reCaptcha");b=getParam(c,/data-ray="([^"]*)/i,replaceHtmlEntities);var a=getParam(c,/data-sitekey="([^"]*)/i,replaceHtmlEntities);if(!b||!a)throw AnyBalance.trace(c),new AnyBalance.Error("Не удалось найти параметры Cloudflare для ввода капчи");c=solveRecaptcha("Вы заходите из небезопасного расположения. Cloudflare требует доказать, что вы не робот.","https://cloudflare.com/",a);a=n();b=c=AnyBalance.requestGet(a+"/cdn-cgi/l/chk_captcha?"+createUrlEncodedParams({id:b,
"g-recaptcha-response":c}),addHeaders({Referer:f}))}else{c=b;AnyBalance.trace("Пытаемся пройти автоматизированную проверку браузера Cloudflare");b=[e,l,e.location,e];a=getParam(c,null,null,/<input[^>]+name="jschl_vc"[^>]*value="([^"]*)/i,null,html_entity_decode);if(!a)throw new d.Error("Не удалось найти секретный ключ Cloudflare");var g=new k("input",{name:"jschl_answer"});m={jschl_vc:new k("input",{value:a}),"jschl-answer":g,"challenge-form":new k("form",{action:"/cdn-cgi/l/chk_jschl"},[new k("input",
{name:"jschl_vc",value:a}),g])};a=/setTimeout\(function\(\)\{([\s\S]*?)\},\s*(\d+)\)/.exec(c);if(!a)throw d.trace(c),new d.Error("Не удалось найти скрипт Cloudflare для выполнения");c=a[1];d.sleep(+a[2]);safeEval(c,"window,document,location,parent",b);b=l._lastHtml}9<=d.getLevel()&&(d.setData("__cfduid",d.getCookie("__cfduid")),d.setData("cf_clearance",d.getCookie("cf_clearance")),d.saveData());return b}}};
