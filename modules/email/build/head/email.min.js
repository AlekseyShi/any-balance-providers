function Email(){var q=new Date,l=AnyBalance.requestGet("https://10minutemail.net/",addHeaders({})),g=getParam(l,null,null,/<input[^>]+id="fe_text"[^>]*value="([^"]*)/i);if(!g)throw AnyBalance.trace(l),new AnyBalance.Error("Не удалось получить временный e-mail!");var m;return{email:g,waitForEmails:function(n,r){var p={},g=(new Date).getTime();do{var a;a=AnyBalance.requestGet("https://10minutemail.net/mailbox.ajax.php?_="+(new Date).getTime(),addHeaders({Referer:"https://10minutemail.net/","X-Requested-With":"XMLHttpRequest"}));
if(!/<table[^>]+maillist/i.test(a))throw AnyBalance.trace(a),new AnyBalance.Error("Не удалось проверить е-мейл!");a=getElements(a,/<tr[^>]+onclick[^>]*>/ig);for(var d=[],b=0;b<a.length;++b){var e=a[b];if(!/mid=welcome/i.test(e)){var f=getParam(e,null,null,/<a[^>]+href="readmail[^>]*>([\s\S]*?)<\/a>/i,replaceTagsAndSpaces),c=getParam(e,null,null,/<a[^>]+href="readmail.html\?mid=([^"]*)/i),h=getParam(e,null,null,/<td[^>]*>([\s\S]*?)<\/td>/i,replaceTagsAndSpaces),e=getParam(e,null,null,/<span[^>]*title="(\d{4}[^"]*)/i,
replaceHtmlEntities,parseDateISO);d.push({name:f,id:c,from:h,time:e})}}a=d;for(d=0;d<a.length;++d){b=a[d];if(!p[b.id]){AnyBalance.trace("Получаем емейл от "+b.from+": "+b.name);c=b;AnyBalance.trace("Fetching email "+c.name+" from "+c.from);f=AnyBalance.requestGet("https://10minutemail.net/readmail.html?mid="+encodeURIComponent(c.id),addHeaders({Referer:"https://10minutemail.net/"}));c.text=getElement(f,/<div[^>]+id="tabs-1"[^>]*>/i,replaceTagsAndSpaces);c.html=getElement(f,/<div[^>]+id="mailinhtml"[^>]*>/i);
f=getElements(f,/<a[^>]+href="attachment[^>]*>/ig);AnyBalance.trace("Email "+c.name+" has "+f.length+" attachments");if(f.length)for(c=c.attachments=[],h=0;h<f.length;h++){var k=f[h],e=getParam(k,null,null,null,replaceTagsAndSpaces),k=getParam(k,null,null,/<a[^>]+href="([^"]*)/i);c.push({name:e,url:"https://10minutemail.net/"+k});AnyBalance.trace("Attachment found: "+e+": "+k)}p[b.id]=b;m&&m(b)}a[d]=p[b.id]}if(a.length>=n)return a;d=(new Date).getTime();if(d-g>=(r||12E5))return AnyBalance.trace("Ждем емейл слишком долго, терпения больше нет, выходим."),
a;57E4<=d-q.getTime()&&(AnyBalance.trace("Требуется продлить e-mail, продлеваем."),q=new Date,l=AnyBalance.requestGet("https://10minutemail.net/more.html",addHeaders({Referer:"https://10minutemail.net/"})));AnyBalance.sleep(1E4)}while(1)},fetchAttachment:function(n,g){return AnyBalance.requestGet(n,addHeaders({Referer:"https://10minutemail.net/"}),g)},setOnEmail:function(g){m=g}}};
